syntax = "proto3";

package divestore;

import "google/protobuf/timestamp.proto";

// GPS position (latitude/longitude).
message Position {
  double latitude = 1; // Degrees north
  double longitude = 2; // Degrees east
  double altitude = 3; // Meters above sea level
}

message Metadata {
  google.protobuf.Timestamp created_at = 1;
  google.protobuf.Timestamp updated_at = 2;
  google.protobuf.Timestamp deleted_at = 3;
}

// Buhlmann ZHL-16c tissue compartment state.
// Stores the inert gas partial pressures in each of the 16 tissue compartments.
message Tissues {
  repeated double n2_pressures = 1; // N2 partial pressure in each compartment (bar)
  repeated double he_pressures = 2; // He partial pressure in each compartment (bar)
  google.protobuf.Timestamp timestamp = 3; // time at which tissues are valid
  string chain_id = 4; // for determining repetitive dive chains
  int32 generation = 5; // bumped when we update the calculation, to force recalc
}

// Cylinder/tank definition.
// Metric fields (size, workpressure) are always populated for calculations.
// Imperial fields (size_cuft, workpressure_psi) are optionally stored when
// the user enters values in imperial units, to avoid rounding errors on display.
message Cylinder {
  string id = 1;
  Metadata meta = 2;

  double volume_l = 3; // Water volume in liters
  double working_pressure_bar = 4; // Working pressure in bar
  string description = 5;

  // Imperial values (set when entered in imperial units for exact round-trip)
  optional double volume_cuft = 6; // Gas capacity in cuft at working pressure
  optional double working_pressure_psi = 7; // Working pressure in PSI
}
